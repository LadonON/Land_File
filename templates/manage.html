<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Manage File</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='style.css')}}"
    />
  </head>
  <body>
    <div class="title">
      <h1>Land</h1>
      <span>Better than cloud</span>
    </div>
    <div class="menu">
      <div id="user">
        <h2>Manage File</h2>
        <p>
          <a href="{{ url_for('home') }}">Back to Home</a>
        </p>
      </div>

      <div>
        {% with messages = get_flashed_messages(with_categories=true) %} {% if
        messages %}
        <div class="flashes">
          {% for category, message in messages %}
          <div class="alert alert-{{ category }}">{{ message }}</div>
          {% endfor %}
        </div>
        {% endif %} {% endwith %}

        <p><strong>File ID:</strong> {{ file_id }}</p>

        <p><strong>File Path:</strong> {{ path }}</p>
      </div>
      <div>
        <h3>Visibility</h3>

        <form
          method="GET"
          id="public_form"
          action="{{ url_for('make_public', file_id=file_id) }}"
        >
          <label>
            <input
              type="checkbox"
              name="public"
              {%
              if
              file.public
              %}checked{%
              endif
              %}
              onclick="document.getElementById('public_form').submit();"
            />
            Make Public
          </label>
        </form>

        <form
          method="GET"
          id="private_form"
          action="{{ url_for('make_private', file_id=file_id) }}"
        >
          <label>
            <input
              type="checkbox"
              name="private"
              {%
              if
              not
              file.public
              %}checked{%
              endif
              %}
              onclick="document.getElementById('private_form').submit();"
            />
            Make Private
          </label>
        </form>

        <hr />

        <p>
          <a
            id="button"
            href="{{ url_for('delete', file_id=file_id) }}"
            onclick="return confirm('Are you sure you want to delete this file?');"
          >
            Delete File
          </a>
        </p>

        <hr />

        <p>
          {% if file.is_encrypted %}
          <strong>Status:</strong> Encrypted
          <a id="button" href="{{ url_for('decrypt_file', file_id=file_id) }}"
            >Decrypt File</a
          >
          {% else %}
          <strong>Status:</strong> Not Encrypted
          <a id="button" href="{{ url_for('encrypt_file', file_id=file_id) }}"
            >Encrypt File</a
          >
          {% endif %}
        </p>
      </div>
    </div>
  </body>
</html>
